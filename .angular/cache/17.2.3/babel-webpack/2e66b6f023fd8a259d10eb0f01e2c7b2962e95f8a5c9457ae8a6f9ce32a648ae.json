{"ast":null,"code":"import { SubscriptionContainer } from '../../helper/subscription-container';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../service/market.service\";\nimport * as i3 from \"@angular/platform-browser\";\nexport class ProductComponent {\n  constructor(route, service, title) {\n    this.route = route;\n    this.service = service;\n    this.title = title;\n    this.isLoading = false;\n    this.subscriptionContainer = new SubscriptionContainer();\n    this.item = {};\n  }\n  ngOnInit() {\n    this.isLoading = true;\n    this.route.paramMap.subscribe(response => {\n      this.itemType = response.get('item');\n      this.pageHeading = this.itemType === 'fruit' ? 'Fruits' : 'Vegetables';\n      this.fetchProducts(this.itemType);\n      this.title.setTitle('Purilo | ' + this.pageHeading);\n    });\n  }\n  fetchProducts(productType) {\n    //Fetch products based on type\n    this.subscriptionContainer.addSubscription = this.service.fetchProducts(productType).subscribe(response => {\n      this.products = response;\n      this.filteredProducts = response;\n      this.isLoading = false;\n    });\n  }\n  removeQuantity($event, product) {\n    $event.preventDefault();\n    product.quantity -= 1;\n    product.quantity = product.quantity <= 0 ? 1 : product.quantity;\n  }\n  addQuantity($event, product) {\n    $event.preventDefault();\n    product.quantity += 1;\n  }\n  openAdd(product) {\n    this.item = product;\n    document.querySelector('.add-to-cart').classList.add('open');\n  }\n  cancelAdd() {\n    document.querySelector('.add-to-cart').classList.remove('open');\n  }\n  addToCart(product) {\n    this.service.addToCart(product);\n    document.querySelector('.add-to-cart').classList.remove('open');\n  }\n  search() {\n    if (this.searchTerm.trim() == '') {\n      this.filteredProducts = this.products;\n    } else {\n      this.filteredProducts = this.products.filter(product => {\n        return product.name.toLowerCase().includes(this.searchTerm.toLowerCase());\n      });\n    }\n  }\n  ngOnDestroy() {\n    this.subscriptionContainer.removeSubscription();\n  }\n  static {\n    this.ɵfac = function ProductComponent_Factory(t) {\n      return new (t || ProductComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.MarketService), i0.ɵɵdirectiveInject(i3.Title));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProductComponent,\n      selectors: [[\"app-product\"]],\n      decls: 2,\n      vars: 0,\n      template: function ProductComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p\");\n          i0.ɵɵtext(1, \"product works!\");\n          i0.ɵɵelementEnd();\n        }\n      },\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["SubscriptionContainer","ProductComponent","constructor","route","service","title","isLoading","subscriptionContainer","item","ngOnInit","paramMap","subscribe","response","itemType","get","pageHeading","fetchProducts","setTitle","productType","addSubscription","products","filteredProducts","removeQuantity","$event","product","preventDefault","quantity","addQuantity","openAdd","document","querySelector","classList","add","cancelAdd","remove","addToCart","search","searchTerm","trim","filter","name","toLowerCase","includes","ngOnDestroy","removeSubscription","i0","ɵɵdirectiveInject","i1","ActivatedRoute","i2","MarketService","i3","Title","selectors","decls","vars","template","ProductComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd"],"sources":["D:\\Development\\Angular\\e-commerce\\src\\app\\components\\product\\product.component.ts","D:\\Development\\Angular\\e-commerce\\src\\app\\components\\product\\product.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, ParamMap } from '@angular/router';\nimport { MarketService } from '../../service/market.service';\nimport { Product } from '../../interface/product';\nimport { SubscriptionContainer } from '../../helper/subscription-container';\nimport { Title } from '@angular/platform-browser';\n\n@Component({\n\tselector: 'app-product',\n\ttemplateUrl: './product.component.html',\n\tstyleUrls: ['./product.component.scss'],\n})\nexport class ProductComponent implements OnInit, OnDestroy {\n\tproducts: Product[];\n\titemType: string;\n\tpageHeading: string;\n\tisLoading: boolean = false;\n\tsubscriptionContainer = new SubscriptionContainer();\n\tsearchTerm: string;\n\tfilteredProducts: Product[];\n\titem: Product = {} as Product;\n\n\tconstructor(\n\t\tprivate route: ActivatedRoute,\n\t\tprivate service: MarketService,\n\t\tprivate title: Title\n\t) {}\n\n\tngOnInit(): void {\n\t\tthis.isLoading = true;\n\t\tthis.route.paramMap.subscribe((response: ParamMap) => {\n\t\t\tthis.itemType = response.get('item');\n\t\t\tthis.pageHeading =\n\t\t\t\tthis.itemType === 'fruit' ? 'Fruits' : 'Vegetables';\n\t\t\tthis.fetchProducts(this.itemType);\n\t\t\tthis.title.setTitle('Purilo | ' + this.pageHeading);\n\t\t});\n\t}\n\n\tprivate fetchProducts(productType: string) {\n\t\t//Fetch products based on type\n\t\tthis.subscriptionContainer.addSubscription = this.service\n\t\t\t.fetchProducts(productType)\n\t\t\t.subscribe((response: Product[]) => {\n\t\t\t\tthis.products = response;\n\t\t\t\tthis.filteredProducts = response;\n\t\t\t\tthis.isLoading = false;\n\t\t\t});\n\t}\n\n\tremoveQuantity($event: MouseEvent, product: Product) {\n\t\t$event.preventDefault();\n\t\tproduct.quantity -= 1;\n\t\tproduct.quantity = product.quantity <= 0 ? 1 : product.quantity;\n\t}\n\n\taddQuantity($event: MouseEvent, product: Product) {\n\t\t$event.preventDefault();\n\t\tproduct.quantity += 1;\n\t}\n\n\topenAdd(product: Product) {\n\t\tthis.item = product;\n\t\tdocument.querySelector('.add-to-cart').classList.add('open');\n\t}\n\n\tcancelAdd() {\n\t\tdocument.querySelector('.add-to-cart').classList.remove('open');\n\t}\n\n\taddToCart(product: Product) {\n\t\tthis.service.addToCart(product);\n\t\tdocument.querySelector('.add-to-cart').classList.remove('open');\n\t}\n\n\tsearch() {\n\t\tif (this.searchTerm.trim() == '') {\n\t\t\tthis.filteredProducts = this.products;\n\t\t} else {\n\t\t\tthis.filteredProducts = this.products.filter((product) => {\n\t\t\t\treturn product.name\n\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t.includes(this.searchTerm.toLowerCase());\n\t\t\t});\n\t\t}\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.subscriptionContainer.removeSubscription();\n\t}\n}\n","<p>product works!</p>\n"],"mappings":"AAIA,SAASA,qBAAqB,QAAQ,qCAAqC;;;;;AAQ3E,OAAM,MAAOC,gBAAgB;EAU5BC,YACSC,KAAqB,EACrBC,OAAsB,EACtBC,KAAY;IAFZ,KAAAF,KAAK,GAALA,KAAK;IACL,KAAAC,OAAO,GAAPA,OAAO;IACP,KAAAC,KAAK,GAALA,KAAK;IATd,KAAAC,SAAS,GAAY,KAAK;IAC1B,KAAAC,qBAAqB,GAAG,IAAIP,qBAAqB,EAAE;IAGnD,KAAAQ,IAAI,GAAY,EAAa;EAM1B;EAEHC,QAAQA,CAAA;IACP,IAAI,CAACH,SAAS,GAAG,IAAI;IACrB,IAAI,CAACH,KAAK,CAACO,QAAQ,CAACC,SAAS,CAAEC,QAAkB,IAAI;MACpD,IAAI,CAACC,QAAQ,GAAGD,QAAQ,CAACE,GAAG,CAAC,MAAM,CAAC;MACpC,IAAI,CAACC,WAAW,GACf,IAAI,CAACF,QAAQ,KAAK,OAAO,GAAG,QAAQ,GAAG,YAAY;MACpD,IAAI,CAACG,aAAa,CAAC,IAAI,CAACH,QAAQ,CAAC;MACjC,IAAI,CAACR,KAAK,CAACY,QAAQ,CAAC,WAAW,GAAG,IAAI,CAACF,WAAW,CAAC;IACpD,CAAC,CAAC;EACH;EAEQC,aAAaA,CAACE,WAAmB;IACxC;IACA,IAAI,CAACX,qBAAqB,CAACY,eAAe,GAAG,IAAI,CAACf,OAAO,CACvDY,aAAa,CAACE,WAAW,CAAC,CAC1BP,SAAS,CAAEC,QAAmB,IAAI;MAClC,IAAI,CAACQ,QAAQ,GAAGR,QAAQ;MACxB,IAAI,CAACS,gBAAgB,GAAGT,QAAQ;MAChC,IAAI,CAACN,SAAS,GAAG,KAAK;IACvB,CAAC,CAAC;EACJ;EAEAgB,cAAcA,CAACC,MAAkB,EAAEC,OAAgB;IAClDD,MAAM,CAACE,cAAc,EAAE;IACvBD,OAAO,CAACE,QAAQ,IAAI,CAAC;IACrBF,OAAO,CAACE,QAAQ,GAAGF,OAAO,CAACE,QAAQ,IAAI,CAAC,GAAG,CAAC,GAAGF,OAAO,CAACE,QAAQ;EAChE;EAEAC,WAAWA,CAACJ,MAAkB,EAAEC,OAAgB;IAC/CD,MAAM,CAACE,cAAc,EAAE;IACvBD,OAAO,CAACE,QAAQ,IAAI,CAAC;EACtB;EAEAE,OAAOA,CAACJ,OAAgB;IACvB,IAAI,CAAChB,IAAI,GAAGgB,OAAO;IACnBK,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC,CAACC,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC;EAC7D;EAEAC,SAASA,CAAA;IACRJ,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC,CAACC,SAAS,CAACG,MAAM,CAAC,MAAM,CAAC;EAChE;EAEAC,SAASA,CAACX,OAAgB;IACzB,IAAI,CAACpB,OAAO,CAAC+B,SAAS,CAACX,OAAO,CAAC;IAC/BK,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC,CAACC,SAAS,CAACG,MAAM,CAAC,MAAM,CAAC;EAChE;EAEAE,MAAMA,CAAA;IACL,IAAI,IAAI,CAACC,UAAU,CAACC,IAAI,EAAE,IAAI,EAAE,EAAE;MACjC,IAAI,CAACjB,gBAAgB,GAAG,IAAI,CAACD,QAAQ;KACrC,MAAM;MACN,IAAI,CAACC,gBAAgB,GAAG,IAAI,CAACD,QAAQ,CAACmB,MAAM,CAAEf,OAAO,IAAI;QACxD,OAAOA,OAAO,CAACgB,IAAI,CACjBC,WAAW,EAAE,CACbC,QAAQ,CAAC,IAAI,CAACL,UAAU,CAACI,WAAW,EAAE,CAAC;MAC1C,CAAC,CAAC;;EAEJ;EAEAE,WAAWA,CAAA;IACV,IAAI,CAACpC,qBAAqB,CAACqC,kBAAkB,EAAE;EAChD;;;uBA7EY3C,gBAAgB,EAAA4C,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,cAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,aAAA,GAAAL,EAAA,CAAAC,iBAAA,CAAAK,EAAA,CAAAC,KAAA;IAAA;EAAA;;;YAAhBnD,gBAAgB;MAAAoD,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,QAAA,WAAAC,0BAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCZ7Bb,EAAA,CAAAe,cAAA,QAAG;UAAAf,EAAA,CAAAgB,MAAA,qBAAc;UAAAhB,EAAA,CAAAiB,YAAA,EAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}